import { useEffect, useState } from "react";
import "./Navbar.css";
import CButton from "./CButton";

function NavbarWithHeader({ aboutRef }) {
  const [show, setShow] = useState(false);

  const handleClose = () => setShow(false);
  const handleShow = () => setShow(true);

  const [navShow, navSetShow] = useState(false);
  const handleOpenNavBar = () => navSetShow(true);
  const handleCloseNavBar = () => navSetShow(false);
  const handClick = () => {
    handleCloseNavBar();
    aboutRef.current && aboutRef.current.scrollIntoView({ behavior: "smooth" });
  };
  return (
    <>
      <div className="announcement">
        <p className="text">FREE SHIPPING ON ALL ORDERS</p>
      </div>
      <nav>
        <div className="brand_name">PISTONS</div>
        <div>
          <ul id="navbar" className={navShow ? "" : "hidden"}>
            <li>NEW</li>
            <li>BRANDS</li>
            <li>COLLECTIONS</li>
            <li>ACCESSORIES</li>
            <li onClick={handClick} style={{ cursor: "pointer" }}>
              ABOUT
            </li>
          </ul>
          <div
            className={`navbar_close_icon ${navShow ? "" : "hidden"}`}
            onClick={handleCloseNavBar}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M13.4099 12L19.7099 5.71C19.8982 5.5217 20.004 5.2663 20.004 5C20.004 4.7337 19.8982 4.47831 19.7099 4.29C19.5216 4.1017 19.2662 3.99591 18.9999 3.99591C18.7336 3.99591 18.4782 4.1017 18.2899 4.29L11.9999 10.59L5.70994 4.29C5.52164 4.1017 5.26624 3.99591 4.99994 3.99591C4.73364 3.99591 4.47824 4.1017 4.28994 4.29C4.10164 4.47831 3.99585 4.7337 3.99585 5C3.99585 5.2663 4.10164 5.5217 4.28994 5.71L10.5899 12L4.28994 18.29C4.19621 18.383 4.12182 18.4936 4.07105 18.6154C4.02028 18.7373 3.99414 18.868 3.99414 19C3.99414 19.132 4.02028 19.2627 4.07105 19.3846C4.12182 19.5064 4.19621 19.617 4.28994 19.71C4.3829 19.8037 4.4935 19.8781 4.61536 19.9289C4.73722 19.9797 4.86793 20.0058 4.99994 20.0058C5.13195 20.0058 5.26266 19.9797 5.38452 19.9289C5.50638 19.8781 5.61698 19.8037 5.70994 19.71L11.9999 13.41L18.2899 19.71C18.3829 19.8037 18.4935 19.8781 18.6154 19.9289C18.7372 19.9797 18.8679 20.0058 18.9999 20.0058C19.132 20.0058 19.2627 19.9797 19.3845 19.9289C19.5064 19.8781 19.617 19.8037 19.7099 19.71C19.8037 19.617 19.8781 19.5064 19.9288 19.3846C19.9796 19.2627 20.0057 19.132 20.0057 19C20.0057 18.868 19.9796 18.7373 19.9288 18.6154C19.8781 18.4936 19.8037 18.383 19.7099 18.29L13.4099 12Z"
                fill="black"
              />
            </svg>
          </div>
        </div>
        <div className="right">
          <div className="svgs">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="19"
              height="21"
              viewBox="0 0 19 21"
              fill="none"
              className="cart"
            >
              <path
                d="M18.5 13C18.4978 12.3997 18.3155 11.8139 17.9768 11.3183C17.6381 10.8227 17.1585 10.4401 16.6 10.22L18.47 3.22001C18.5091 3.07093 18.5131 2.91484 18.4819 2.76392C18.4507 2.61301 18.385 2.47135 18.29 2.35001C18.1929 2.23632 18.0715 2.14585 17.9348 2.08528C17.798 2.02471 17.6495 1.99557 17.5 2.00001H3.8L3.47 0.74001C3.41263 0.52692 3.28638 0.338794 3.11093 0.204945C2.93547 0.0710953 2.72068 -0.000958872 2.5 9.63738e-06H0.5V2.00001H1.73L4.21 11.26C4.2686 11.4782 4.39934 11.6701 4.58092 11.8044C4.76251 11.9388 4.98424 12.0077 5.21 12H15.5C15.7652 12 16.0196 12.1054 16.2071 12.2929C16.3946 12.4804 16.5 12.7348 16.5 13C16.5 13.2652 16.3946 13.5196 16.2071 13.7071C16.0196 13.8947 15.7652 14 15.5 14H2.5C2.23478 14 1.98043 14.1054 1.79289 14.2929C1.60536 14.4804 1.5 14.7348 1.5 15C1.5 15.2652 1.60536 15.5196 1.79289 15.7071C1.98043 15.8947 2.23478 16 2.5 16H3.68C3.51554 16.4531 3.46269 16.9392 3.52593 17.4171C3.58917 17.895 3.76665 18.3506 4.04332 18.7454C4.31999 19.1401 4.68772 19.4624 5.11535 19.6849C5.54299 19.9074 6.01795 20.0235 6.5 20.0235C6.98205 20.0235 7.45701 19.9074 7.88465 19.6849C8.31228 19.4624 8.68001 19.1401 8.95668 18.7454C9.23335 18.3506 9.41083 17.895 9.47407 17.4171C9.53731 16.9392 9.48446 16.4531 9.32 16H11.68C11.5303 16.4126 11.4729 16.853 11.512 17.2902C11.551 17.7274 11.6856 18.1507 11.906 18.5302C12.1265 18.9098 12.4276 19.2363 12.788 19.4868C13.1485 19.7373 13.5595 19.9056 13.9921 19.98C14.4247 20.0543 14.8683 20.0328 15.2917 19.917C15.715 19.8012 16.1078 19.5939 16.4424 19.3097C16.7769 19.0255 17.045 18.6714 17.2277 18.2723C17.4105 17.8732 17.5034 17.4389 17.5 17C17.4981 16.4834 17.3602 15.9764 17.1 15.53C17.5276 15.2604 17.8802 14.8871 18.1249 14.4448C18.3697 14.0025 18.4987 13.5055 18.5 13ZM14.59 10H6L4.34 4.00001H16.2L14.59 10ZM6.5 18C6.30222 18 6.10888 17.9414 5.94443 17.8315C5.77998 17.7216 5.65181 17.5654 5.57612 17.3827C5.50043 17.2 5.48063 16.9989 5.51921 16.8049C5.5578 16.6109 5.65304 16.4328 5.79289 16.2929C5.93275 16.153 6.11093 16.0578 6.30491 16.0192C6.49889 15.9806 6.69996 16.0004 6.88268 16.0761C7.06541 16.1518 7.22159 16.28 7.33147 16.4444C7.44135 16.6089 7.5 16.8022 7.5 17C7.5 17.2652 7.39464 17.5196 7.20711 17.7071C7.01957 17.8947 6.76522 18 6.5 18ZM14.5 18C14.3022 18 14.1089 17.9414 13.9444 17.8315C13.78 17.7216 13.6518 17.5654 13.5761 17.3827C13.5004 17.2 13.4806 16.9989 13.5192 16.8049C13.5578 16.6109 13.653 16.4328 13.7929 16.2929C13.9327 16.153 14.1109 16.0578 14.3049 16.0192C14.4989 15.9806 14.7 16.0004 14.8827 16.0761C15.0654 16.1518 15.2216 16.28 15.3315 16.4444C15.4414 16.6089 15.5 16.8022 15.5 17C15.5 17.2652 15.3946 17.5196 15.2071 17.7071C15.0196 17.8947 14.7652 18 14.5 18Z"
                fill="black"
              />
            </svg>
          </div>
          <div className="svgs" onClick={handleShow}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              className="search_icon"
              fill="none"
            >
              <path
                d="M21.71 20.29L18 16.61C19.4401 14.8144 20.1375 12.5353 19.9488 10.2413C19.7601 7.9473 18.6997 5.81278 16.9855 4.27664C15.2714 2.7405 13.0338 1.91951 10.7329 1.98247C8.43204 2.04543 6.24273 2.98756 4.61515 4.61514C2.98757 6.24272 2.04543 8.43203 1.98247 10.7329C1.91951 13.0338 2.74051 15.2714 4.27665 16.9855C5.81279 18.6997 7.94731 19.7601 10.2413 19.9488C12.5353 20.1375 14.8144 19.4401 16.61 18L20.29 21.68C20.383 21.7737 20.4936 21.8481 20.6154 21.8989C20.7373 21.9497 20.868 21.9758 21 21.9758C21.132 21.9758 21.2627 21.9497 21.3846 21.8989C21.5064 21.8481 21.617 21.7737 21.71 21.68C21.8902 21.4935 21.991 21.2443 21.991 20.985C21.991 20.7257 21.8902 20.4765 21.71 20.29ZM11 18C9.61553 18 8.26216 17.5895 7.11101 16.8203C5.95987 16.0511 5.06266 14.9579 4.53285 13.6788C4.00303 12.3997 3.86441 10.9922 4.13451 9.63436C4.4046 8.2765 5.07129 7.02922 6.05026 6.05025C7.02922 5.07128 8.2765 4.4046 9.63437 4.1345C10.9922 3.8644 12.3997 4.00303 13.6788 4.53284C14.9579 5.06265 16.0511 5.95986 16.8203 7.111C17.5895 8.26215 18 9.61553 18 11C18 12.8565 17.2625 14.637 15.9498 15.9497C14.637 17.2625 12.8565 18 11 18Z"
                fill="black"
              />
            </svg>
          </div>
          <div className="svgs mobile_only" onClick={handleOpenNavBar}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
            >
              <path
                d="M3 8H21C21.2652 8 21.5196 7.89464 21.7071 7.70711C21.8946 7.51957 22 7.26522 22 7C22 6.73478 21.8946 6.48043 21.7071 6.29289C21.5196 6.10536 21.2652 6 21 6H3C2.73478 6 2.48043 6.10536 2.29289 6.29289C2.10536 6.48043 2 6.73478 2 7C2 7.26522 2.10536 7.51957 2.29289 7.70711C2.48043 7.89464 2.73478 8 3 8ZM21 16H3C2.73478 16 2.48043 16.1054 2.29289 16.2929C2.10536 16.4804 2 16.7348 2 17C2 17.2652 2.10536 17.5196 2.29289 17.7071C2.48043 17.8946 2.73478 18 3 18H21C21.2652 18 21.5196 17.8946 21.7071 17.7071C21.8946 17.5196 22 17.2652 22 17C22 16.7348 21.8946 16.4804 21.7071 16.2929C21.5196 16.1054 21.2652 16 21 16ZM21 11H3C2.73478 11 2.48043 11.1054 2.29289 11.2929C2.10536 11.4804 2 11.7348 2 12C2 12.2652 2.10536 12.5196 2.29289 12.7071C2.48043 12.8946 2.73478 13 3 13H21C21.2652 13 21.5196 12.8946 21.7071 12.7071C21.8946 12.5196 22 12.2652 22 12C22 11.7348 21.8946 11.4804 21.7071 11.2929C21.5196 11.1054 21.2652 11 21 11Z"
                fill="black"
              />
            </svg>
          </div>
        </div>
      </nav>

      <div className={show ? "search_box" : "search_box inactive"}>
        <input className="input_box" />
        {/* <div className="search_text">
          <p className="text">SEARCH</p>
        </div> */}
        <CButton boxText="Search" variant="dark" />
        <div className="close_icon" onClick={handleClose}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
          >
            <path
              d="M13.41 12L19.71 5.71C19.8983 5.5217 20.0041 5.2663 20.0041 5C20.0041 4.7337 19.8983 4.47831 19.71 4.29C19.5217 4.1017 19.2663 3.99591 19 3.99591C18.7337 3.99591 18.4783 4.1017 18.29 4.29L12 10.59L5.71 4.29C5.5217 4.1017 5.2663 3.99591 5 3.99591C4.7337 3.99591 4.4783 4.1017 4.29 4.29C4.1017 4.47831 3.99591 4.7337 3.99591 5C3.99591 5.2663 4.1017 5.5217 4.29 5.71L10.59 12L4.29 18.29C4.19627 18.383 4.12188 18.4936 4.07111 18.6154C4.02034 18.7373 3.9942 18.868 3.9942 19C3.9942 19.132 4.02034 19.2627 4.07111 19.3846C4.12188 19.5064 4.19627 19.617 4.29 19.71C4.38296 19.8037 4.49356 19.8781 4.61542 19.9289C4.73728 19.9797 4.86799 20.0058 5 20.0058C5.13201 20.0058 5.26272 19.9797 5.38458 19.9289C5.50644 19.8781 5.61704 19.8037 5.71 19.71L12 13.41L18.29 19.71C18.383 19.8037 18.4936 19.8781 18.6154 19.9289C18.7373 19.9797 18.868 20.0058 19 20.0058C19.132 20.0058 19.2627 19.9797 19.3846 19.9289C19.5064 19.8781 19.617 19.8037 19.71 19.71C19.8037 19.617 19.8781 19.5064 19.9289 19.3846C19.9797 19.2627 20.0058 19.132 20.0058 19C20.0058 18.868 19.9797 18.7373 19.9289 18.6154C19.8781 18.4936 19.8037 18.383 19.71 18.29L13.41 12Z"
              fill="black"
            />
          </svg>
        </div>
      </div>
    </>
  );
}

export default NavbarWithHeader;
